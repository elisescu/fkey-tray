var SerialPort = require("serialport").SerialPort;

var DEBUG = true;
FKey = Object();

module.exports = FKey;

FKey.serialPort = null;

FKey._onData = function(data) {
    if (DEBUG) console.log("fkey says: [" + data + "]");
}

FKey.connect = function(connectCB) {
    FKey.serialPort = new SerialPort("/dev/tty.usbmodem1421", { baudrate: 115200 });

    FKey.serialPort.on("open", function() {
            if (DEBUG) console.log("FKey serial port openned");

            FKey.serialPort.on('data', FKey._onData);

            if (typeof connectCB != "undefined") connectCB();
    });
}

